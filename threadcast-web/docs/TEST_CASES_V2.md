# ThreadCast E2E Test Cases V2

## 테스트 철학 변경

### 기존 문제점 (V1)
- ❌ "모달이 열리는지" 확인 → 실제 기능 미테스트
- ❌ "버튼이 보이는지" 확인 → 클릭 후 동작 미테스트
- ❌ 단편적 UI 확인 → 데이터 흐름 미검증

### 새로운 접근 (V2)
- ✅ **전체 CRUD 플로우** 테스트
- ✅ **데이터 생성 → 표시 → 수정 → 삭제** 검증
- ✅ **연관 데이터 업데이트** 확인 (진행률, 통계 등)
- ✅ **사용자 시나리오** 기반 테스트

---

## 시나리오 1: Mission 전체 라이프사이클

### SC-01: Mission 생성부터 완료까지

| Step | Action | Verification |
|------|--------|--------------|
| 1 | MissionsPage 접속 | Kanban 보드 4개 컬럼 확인 |
| 2 | "+ New Mission" 클릭 | 생성 모달 열림 |
| 3 | 제목 입력: "테스트 미션 A" | 입력값 표시 |
| 4 | 설명 입력: "E2E 테스트용 미션" | 입력값 표시 |
| 5 | 우선순위 "High" 선택 | 선택 표시 |
| 6 | "Create" 버튼 클릭 | 로딩 표시 → 모달 닫힘 |
| 7 | Backlog 컬럼 확인 | **"테스트 미션 A" 카드가 추가됨** |
| 8 | 추가된 카드 정보 확인 | ID, 제목, High 배지, 진행률 0% |
| 9 | Overview 통계 확인 | Total 수 +1 증가 |
| 10 | 생성된 미션 카드 클릭 | Detail Modal 열림 |
| 11 | Modal 정보 확인 | 입력한 제목/설명/우선순위 일치 |
| 12 | "Start Weaving" 클릭 | 상태 Threading으로 변경 |
| 13 | Kanban 보드 확인 | 카드가 Threading 컬럼으로 이동 |
| 14 | Overview 통계 확인 | Active 수 +1 증가 |

### SC-01 검증 포인트
- [ ] 생성한 데이터가 실제로 목록에 나타나는가
- [ ] 입력한 값이 정확히 저장되었는가
- [ ] 상태 변경이 UI에 즉시 반영되는가
- [ ] 통계가 정확히 업데이트되는가

---

## 시나리오 2: Todo 전체 라이프사이클

### SC-02: Todo 생성부터 완료까지

| Step | Action | Verification |
|------|--------|--------------|
| 1 | Mission Detail에서 "View Todos" 클릭 | TodosPage로 이동 |
| 2 | 현재 Todo 개수 기록 | 예: 기존 3개 |
| 3 | "+ Add Todo" 클릭 | 생성 모달 열림 |
| 4 | 제목 입력: "API 연동 구현" | 입력값 표시 |
| 5 | 설명 입력: "REST API 호출 로직" | 입력값 표시 |
| 6 | 복잡도 "Medium" 선택 | 선택 표시 |
| 7 | 예상 시간 "2시간" 입력 | 입력값 표시 |
| 8 | "Create" 버튼 클릭 | 로딩 → 모달 닫힘 |
| 9 | Backlog 컬럼 확인 | **"API 연동 구현" Todo 추가됨** |
| 10 | Todo 개수 확인 | 기존 +1 (4개) |
| 11 | Overview 통계 확인 | Total 수 +1 |
| 12 | 생성된 Todo 클릭 | Detail Drawer 열림 |
| 13 | Drawer 정보 확인 | 입력한 제목/설명/복잡도/시간 일치 |
| 14 | Steps 섹션 확인 | 자동 생성된 Steps 표시 |
| 15 | 첫 번째 Step 체크 | 체크박스 선택됨 |
| 16 | 진행률 바 확인 | **진행률 증가 (예: 0% → 25%)** |
| 17 | 모든 Steps 체크 | 모두 완료 표시 |
| 18 | Todo 상태 확인 | **Woven으로 자동 변경** |
| 19 | Kanban 보드 확인 | Todo가 Woven 컬럼으로 이동 |
| 20 | Mission 진행률 확인 | **Mission 진행률 증가** |

### SC-02 검증 포인트
- [ ] Todo 생성이 실제로 저장되는가
- [ ] Step 완료가 진행률에 반영되는가
- [ ] 모든 Step 완료 시 상태가 변경되는가
- [ ] 부모 Mission 진행률이 업데이트되는가

---

## 시나리오 3: AI 질문 답변 플로우

### SC-03: AI 질문 답변부터 반영까지

| Step | Action | Verification |
|------|--------|--------------|
| 1 | HomePage 접속 | AI 배너에 "N개 질문" 표시 |
| 2 | 배너의 질문 수 기록 | 예: 3개 |
| 3 | AI 배너 클릭 | AI Question Panel 열림 |
| 4 | 질문 목록 확인 | 대기중 질문 N개 표시 |
| 5 | 첫 번째 질문 확인 | 질문 텍스트, 관련 Mission/Todo 태그 |
| 6 | 옵션 선택 또는 답변 입력 | 선택/입력 표시 |
| 7 | "Submit" 버튼 클릭 | 로딩 표시 |
| 8 | 질문 목록 확인 | **답변한 질문이 목록에서 제거됨** |
| 9 | 질문 수 확인 | N-1개로 감소 |
| 10 | Panel 닫기 | Panel 닫힘 |
| 11 | AI 배너 확인 | **질문 수 N-1로 업데이트** |
| 12 | 관련 Mission 페이지 이동 | |
| 13 | 해당 Mission 카드 확인 | **AI 배지 제거 또는 수 감소** |

### SC-03 검증 포인트
- [ ] 답변 제출 API가 호출되는가
- [ ] 답변 후 질문 목록이 업데이트되는가
- [ ] 배너의 질문 수가 감소하는가
- [ ] 관련 Mission/Todo의 AI 배지가 업데이트되는가

---

## 시나리오 4: 언어 변경 전체 반영

### SC-04: 언어 변경 시 모든 UI 업데이트

| Step | Action | Verification |
|------|--------|--------------|
| 1 | HomePage 접속 (한국어 상태) | 한국어 텍스트 확인 |
| 2 | 설정 버튼 클릭 | Settings Modal 열림 |
| 3 | "English" 선택 | 선택 표시 |
| 4 | Modal 닫기 | Modal 닫힘 |
| 5 | HomePage 텍스트 확인 | **모든 텍스트 영어로 변경** |
| 6 | Navigation 확인 | "Missions", "Timeline" 등 영어 |
| 7 | Missions 페이지 이동 | |
| 8 | 페이지 텍스트 확인 | **모든 텍스트 영어** |
| 9 | "+ New Mission" 클릭 | |
| 10 | Modal 텍스트 확인 | **폼 레이블, 버튼 영어** |
| 11 | 브라우저 새로고침 | |
| 12 | 언어 유지 확인 | **영어 상태 유지 (localStorage)** |

### SC-04 검증 포인트
- [ ] 모든 페이지에 언어 변경이 적용되는가
- [ ] Modal/Drawer 내부도 언어가 변경되는가
- [ ] 새로고침 후에도 언어가 유지되는가

---

## 시나리오 5: Workspace 생성과 데이터 연결

### SC-05: Workspace 생성부터 프로젝트 추가까지

| Step | Action | Verification |
|------|--------|--------------|
| 1 | HomePage 접속 | Workspace 목록 표시 |
| 2 | 기존 Workspace 수 기록 | 예: 2개 |
| 3 | "+ 새 Workspace 추가" 클릭 | 생성 Modal 열림 |
| 4 | 이름 입력: "신규 프로젝트" | 입력값 표시 |
| 5 | 설명 입력: "E2E 테스트용" | 입력값 표시 |
| 6 | 경로 입력: "/workspace/new" | 입력값 표시 |
| 7 | "Create" 버튼 클릭 | 로딩 → Modal 닫힘 |
| 8 | Workspace 목록 확인 | **"신규 프로젝트" 카드 추가됨** |
| 9 | 전체 통계 확인 | Workspaces 수 +1 |
| 10 | 새 Workspace 카드 확인 | Projects: 0, Missions: 0, Progress: 0% |
| 11 | Workspace 클릭 | Dashboard로 이동 |
| 12 | Dashboard 정보 확인 | 입력한 이름/설명/경로 표시 |
| 13 | Projects 섹션 확인 | "프로젝트가 없습니다" 또는 빈 목록 |
| 14 | "+ 추가" 클릭 | Project 생성 Modal |
| 15 | 프로젝트 정보 입력 후 생성 | |
| 16 | Projects 목록 확인 | **생성한 프로젝트 표시** |
| 17 | Dashboard 통계 확인 | Projects 수 +1 |

### SC-05 검증 포인트
- [ ] Workspace 생성이 목록에 반영되는가
- [ ] 새 Workspace는 빈 상태로 시작하는가
- [ ] 하위 데이터(Project) 추가가 통계에 반영되는가

---

## 시나리오 6: Timeline 이벤트 추적

### SC-06: 활동이 Timeline에 기록되는지

| Step | Action | Verification |
|------|--------|--------------|
| 1 | Mission 생성 (SC-01 참조) | Mission 생성 완료 |
| 2 | Timeline 페이지 이동 | |
| 3 | 최근 이벤트 확인 | **"Mission 생성됨" 이벤트 존재** |
| 4 | 이벤트 상세 확인 | 생성한 Mission 이름, 시간 표시 |
| 5 | Todo 생성 (SC-02 참조) | Todo 생성 완료 |
| 6 | Timeline 새로고침 | |
| 7 | 최근 이벤트 확인 | **"Todo 생성됨" 이벤트 존재** |
| 8 | Step 완료 (SC-02 참조) | Step 완료 |
| 9 | Timeline 확인 | **"Step 완료" 이벤트 존재** |
| 10 | "Missions" 필터 클릭 | Mission 관련 이벤트만 표시 |
| 11 | Todo 이벤트 확인 | **Todo 이벤트 숨김** |

### SC-06 검증 포인트
- [ ] Mission/Todo 생성이 Timeline에 기록되는가
- [ ] Step 완료가 Timeline에 기록되는가
- [ ] 필터가 정확히 동작하는가

---

## 시나리오 7: 에러 상황 복구

### SC-07: API 실패 시 사용자 경험

| Step | Action | Verification |
|------|--------|--------------|
| 1 | Network offline 설정 | |
| 2 | Mission 생성 시도 | 에러 메시지 표시 |
| 3 | 폼 데이터 확인 | **입력값 유지됨 (사라지지 않음)** |
| 4 | Network online 복구 | |
| 5 | "Create" 재시도 | 정상 생성 완료 |
| 6 | Step 완료 시도 (offline 상태) | |
| 7 | 체크박스 상태 확인 | **Optimistic UI → 롤백** |
| 8 | 에러 메시지 확인 | "저장 실패" Toast 표시 |

### SC-07 검증 포인트
- [ ] 실패 시 사용자 입력이 보존되는가
- [ ] Optimistic UI가 실패 시 롤백되는가
- [ ] 명확한 에러 메시지가 표시되는가
- [ ] 재시도가 가능한가

---

## 시나리오 8: 데이터 정합성 검증

### SC-08: 데이터 변경 시 모든 곳에 반영

| Step | Action | Verification |
|------|--------|--------------|
| 1 | Mission의 모든 Todo 완료 | Todo들 Woven 상태 |
| 2 | Mission 진행률 확인 | **100%** |
| 3 | Dashboard 이동 | |
| 4 | Recent Missions 확인 | 해당 Mission 100% 진행률 |
| 5 | HomePage 이동 | |
| 6 | Workspace 카드 확인 | **Progress 증가 반영** |
| 7 | 전체 통계 확인 | Completed Missions 수 증가 |

### SC-08 검증 포인트
- [ ] 하위 데이터 변경이 상위에 전파되는가
- [ ] 여러 페이지에서 동일한 데이터가 표시되는가
- [ ] 실시간 업데이트가 동작하는가

---

## 데이터 CRUD 테스트 매트릭스

### Mission CRUD

| 작업 | 테스트 내용 | 검증 |
|------|-------------|------|
| **Create** | 폼 입력 → 생성 | 목록에 추가, 통계 증가, Timeline 기록 |
| **Read** | 카드 표시, Modal 열기 | 정확한 데이터 표시 |
| **Update** | 상태 변경 (Start/Pause) | 컬럼 이동, 상태 배지 변경, Timeline 기록 |
| **Delete** | 미션 삭제 | 목록에서 제거, 통계 감소, 하위 Todo 처리 |

### Todo CRUD

| 작업 | 테스트 내용 | 검증 |
|------|-------------|------|
| **Create** | 폼 입력 → 생성 | 목록 추가, Mission 통계 업데이트 |
| **Read** | 카드 표시, Drawer 열기 | 정확한 데이터 표시 |
| **Update** | Step 완료, 상태 변경 | 진행률 계산, Mission 진행률 업데이트 |
| **Delete** | Todo 삭제 | 목록 제거, Mission 진행률 재계산 |

### AI Question CRUD

| 작업 | 테스트 내용 | 검증 |
|------|-------------|------|
| **Read** | 질문 목록 표시 | 정확한 질문, 관련 엔티티 태그 |
| **Update** | 답변 제출 | 목록 제거, 배너 수 감소, 관련 배지 업데이트 |
| **Skip** | 질문 건너뛰기 | 목록 제거, 상태 변경 |

---

## 성능 시나리오

### PF-01: 대량 데이터 처리

| Step | Action | Verification |
|------|--------|--------------|
| 1 | 100개 Mission이 있는 Workspace 접속 | |
| 2 | 초기 로드 시간 측정 | **3초 이내** |
| 3 | 스크롤 성능 측정 | **60fps 유지** |
| 4 | 필터 전환 시간 측정 | **200ms 이내** |
| 5 | Mission 생성 응답 시간 | **2초 이내** |

### PF-02: 느린 네트워크

| Step | Action | Verification |
|------|--------|--------------|
| 1 | Slow 3G 조건 설정 | |
| 2 | 페이지 로드 | 스켈레톤 UI 표시 |
| 3 | 로드 완료 시간 | **45초 이내** |
| 4 | 인터랙션 응답 | 로딩 표시 + 최종 반영 |

---

## 반응형 시나리오

### RESP-01: Mobile에서 전체 플로우

| Step | Action | Verification |
|------|--------|--------------|
| 1 | Mobile 뷰포트 (375x812) 설정 | |
| 2 | Navigation 확인 | 햄버거 메뉴 또는 축소형 |
| 3 | Mission 생성 | Modal이 전체 화면 |
| 4 | Todo 확인 | 카드 세로 배치 |
| 5 | 터치 인터랙션 | 탭, 스와이프 동작 |

---

## 테스트 코드 ID 체계

```
SC-{번호}: 시나리오 테스트
SC-{번호}-{step}: 시나리오 내 단계
CRUD-{Entity}-{C|R|U|D}: CRUD 테스트
PF-{번호}: 성능 테스트
RESP-{번호}: 반응형 테스트
ERR-{번호}: 에러 처리 테스트
```

---

## 우선순위

### Critical (반드시 통과)
- SC-01: Mission 생성 플로우
- SC-02: Todo 완료 플로우
- SC-03: AI 답변 플로우
- CRUD-Mission-C: Mission 생성
- CRUD-Todo-U: Todo Step 완료

### High
- SC-04: 언어 변경
- SC-05: Workspace 생성
- SC-07: 에러 복구
- SC-08: 데이터 정합성

### Medium
- SC-06: Timeline 기록
- PF-01: 대량 데이터
- RESP-01: Mobile 플로우

---

## V1 vs V2 비교

| 항목 | V1 | V2 |
|------|----|----|
| 테스트 관점 | UI 요소 존재 확인 | 전체 기능 동작 확인 |
| "모달 열림" | ✅ 끝 | 시작점 (이후 폼 입력 → 제출 → 결과 확인) |
| 데이터 검증 | ❌ 없음 | ✅ 생성/수정/삭제 후 실제 반영 확인 |
| 연관 데이터 | ❌ 없음 | ✅ 통계, 진행률, 배지 업데이트 확인 |
| 에러 처리 | ❌ 거의 없음 | ✅ 실패 시 롤백, 재시도 검증 |
| 사용자 경험 | 단편적 | 시나리오 기반 전체 플로우 |
